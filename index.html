<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>黛玉进贾府 - 互动叙事体验</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'SimSun','STSong',serif;background:#1a0a00;color:#d4a867;min-height:100vh;overflow-x:hidden}
.screen{display:none;width:100%;min-height:100vh;flex-direction:column;align-items:center;justify-content:center}
.screen.active{display:flex}
#startScreen{background:linear-gradient(rgba(26,10,0,0.5),rgba(26,10,0,0.7)),url('./pic/cover.jpeg') center/cover no-repeat;text-align:center;padding:40px 20px}
#startScreen h1{font-size:3em;color:#f0d080;text-shadow:0 0 20px rgba(240,208,128,0.5);margin-bottom:10px;letter-spacing:8px}
#startScreen .subtitle{font-size:1.2em;color:#c8a050;margin-bottom:40px;letter-spacing:4px}
.start-btn{background:linear-gradient(135deg,#8b6914,#d4a867);color:#1a0a00;border:2px solid #f0d080;padding:16px 48px;font-size:1.3em;font-family:inherit;cursor:pointer;letter-spacing:6px;border-radius:8px;transition:all 0.3s}
.start-btn:hover{transform:scale(1.05);box-shadow:0 0 30px rgba(240,208,128,0.4)}
#gameScreen{padding:0;position:relative}
.scene-bg{width:100%;height:45vh;object-fit:cover;display:block}
.game-panel{width:90%;max-width:800px;margin:-60px auto 30px;background:rgba(40,20,5,0.85);backdrop-filter:blur(12px);border:1px solid rgba(212,168,103,0.3);border-radius:16px;padding:30px;position:relative;z-index:2}
.scene-title{font-size:1.6em;color:#f0d080;text-align:center;margin-bottom:6px;letter-spacing:4px}
.scene-num{text-align:center;color:#a08040;font-size:0.9em;margin-bottom:16px}
.story-text{font-size:1.1em;line-height:2;color:#d4a867;min-height:80px;margin-bottom:20px;text-align:justify}
.choices{display:flex;flex-direction:column;gap:12px}
.choice-btn{background:rgba(139,105,20,0.2);border:1px solid rgba(212,168,103,0.4);color:#d4a867;padding:14px 20px;font-size:1.05em;font-family:inherit;cursor:pointer;border-radius:10px;text-align:left;transition:all 0.3s;line-height:1.6}
.choice-btn:hover{background:rgba(139,105,20,0.4);border-color:#f0d080;transform:translateX(6px)}
.choice-btn.correct{background:rgba(60,120,60,0.4);border-color:#6a6}
.choice-btn.wrong{background:rgba(120,40,40,0.4);border-color:#a66}
.choice-btn:disabled{cursor:default;opacity:0.85}
.choice-btn:disabled:hover{transform:none}
.feedback{margin-top:16px;padding:14px;border-radius:10px;font-size:1em;line-height:1.8;display:none}
.feedback.show{display:block}
.feedback.correct-fb{background:rgba(60,120,60,0.2);border:1px solid rgba(106,170,106,0.4);color:#8c8}
.feedback.wrong-fb{background:rgba(120,40,40,0.2);border:1px solid rgba(170,106,106,0.4);color:#c88}
.nav-bar{display:flex;justify-content:center;gap:16px;margin-top:20px}
.nav-btn{background:linear-gradient(135deg,#5a3a0a,#8b6914);color:#f0d080;border:1px solid #d4a867;padding:10px 28px;font-size:1em;font-family:inherit;cursor:pointer;border-radius:8px;letter-spacing:2px;transition:all 0.3s}
.nav-btn:hover{transform:scale(1.04);box-shadow:0 0 15px rgba(240,208,128,0.3)}
.nav-btn:disabled{opacity:0.4;cursor:default;transform:none;box-shadow:none}
.progress{display:flex;justify-content:center;gap:8px;margin-top:16px}
.dot{width:10px;height:10px;border-radius:50%;background:rgba(212,168,103,0.3);transition:all 0.3s}
.dot.done{background:#6a6}.dot.cur{background:#f0d080;box-shadow:0 0 8px rgba(240,208,128,0.6)}
#reviewScreen{padding:40px 20px}
#reviewScreen h2{font-size:2em;color:#f0d080;text-align:center;margin-bottom:8px;letter-spacing:4px}
.score-text{text-align:center;color:#d4a867;font-size:1.2em;margin-bottom:30px}
.review-list{width:90%;max-width:800px;margin:0 auto}
.review-item{background:rgba(40,20,5,0.85);border:1px solid rgba(212,168,103,0.3);border-radius:12px;padding:20px;margin-bottom:16px}
.review-item h3{color:#f0d080;margin-bottom:8px}
.review-item .your-ans{margin-bottom:4px}
.review-item .correct-ans{color:#8c8}
.review-item .analysis{color:#a08040;margin-top:8px;line-height:1.8;font-size:0.95em}
.restart-btn{display:block;margin:30px auto;background:linear-gradient(135deg,#8b6914,#d4a867);color:#1a0a00;border:2px solid #f0d080;padding:14px 40px;font-size:1.1em;font-family:inherit;cursor:pointer;letter-spacing:4px;border-radius:8px;transition:all 0.3s}
.restart-btn:hover{transform:scale(1.05);box-shadow:0 0 30px rgba(240,208,128,0.4)}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.fade-in{animation:fadeIn 0.6s ease forwards}
</style>
</head>
<body>
<div id="startScreen" class="screen active">
<h1>黛玉进贾府</h1>
<div class="subtitle">红楼梦第三回 · 互动叙事体验</div>
<p style="color:#a08040;max-width:600px;line-height:1.8;margin-bottom:30px">你将扮演林黛玉，初次踏入贾府大门。每一步都需谨慎抉择，展现你的才情与教养。你的选择将决定黛玉在贾府的第一印象。</p>
<button class="start-btn" onclick="startGame()">开 始 体 验</button>
</div>
<div id="gameScreen" class="screen">
<img id="sceneBg" class="scene-bg" src="" alt="">
<div class="game-panel fade-in">
<div id="sceneTitle" class="scene-title"></div>
<div id="sceneNum" class="scene-num"></div>
<div id="storyText" class="story-text"></div>
<div id="choicesDiv" class="choices"></div>
<div id="feedbackDiv" class="feedback"></div>
<div class="nav-bar">
<button id="prevBtn" class="nav-btn" onclick="goPrev()">上一关</button>
<button id="nextBtn" class="nav-btn" onclick="nextScene()">下一关</button>
</div>
<div id="progressDiv" class="progress"></div>
</div>
</div>
<div id="reviewScreen" class="screen">
<h2>复盘总结</h2>
<div id="scoreText" class="score-text"></div>
<div id="reviewList" class="review-list"></div>
<button class="restart-btn" onclick="restartGame()">重新开始</button>
</div>
<script>
'use strict';
var curScene=0, answers=[], typingTimer=null;
var SCENES=[
{title:'第一关：弃舟登岸',img:'./pic/scene1.jpeg',story:'黛玉自扬州乘船北上，终于抵达京城码头。贾府早已派了轿子和婆子在此等候。黛玉下船时，几个婆子连忙上前搀扶行礼。黛玉虽年幼丧母、寄人篱下，却深知礼数不可废。面对这些远道迎接的贾府下人，黛玉该如何回应？',choices:[{text:'A. 微微颔首，轻声道“有劳各位”',correct:true},{text:'B. 低头不语，默默跟随',correct:false},{text:'C. 高声致谢，连连作揖',correct:false}],correctIdx:0,feedback:'✔ 正确！黛玉出身书香门第，虽是寄居，但礼数周全、不卑不亢。微微颔首既显教养，“有劳各位”四字更见体贴。原著中黛玉“步步留心，时时在意”，正是这般得体。',wrongFB:'✖ 不太合适。低头不语显得失礼怯懦；高声致谢则过于热络，不合大家闺秀的矜持。黛玉应当不卑不亢，以微微颔首、轻声致谢为宜。'},
{title:'第二关：入城观街',img:'./pic/scene2.jpeg',story:'轿子穿过京城繁华街市，黛玉坐在轿中，只觉外面车水马龙、热闹非凡。这与扬州的秀丽婉约截然不同。黛玉心中好奇，想看看这天子脚下的都城风貌，但又想起母亲生前教导“大家闺秀不可轻易抛头露面”。黛玉该如何做？',choices:[{text:'A. 掀开轿帘大方观看',correct:false},{text:'B. 从轿帘缝隙悄悄观察',correct:true},{text:'C. 端坐不动，目不斜视',correct:false}],correctIdx:1,feedback:'✔ 正确！从轿帘缝隙悄悄观察，既满足了好奇心，又不失闺秀体统。原著写黛玉“从纱窗向外瞧了一瞧”，正是这般含蓄细腻的观察方式，体现了她的聪慧与谨慎。',wrongFB:'✖ 不太合适。掀帘大看有失体统；完全不看则不合常理，也不符合黛玉聪敏好学的性格。最佳做法是从缝隙中悄悄观察，既好奇又矜持。'},
{title:'第三关：进入荣国府',img:'./pic/scene3.jpeg',story:'轿子终于停在荣国府大门前。黛玉注意到正门未开，轿子从西角门进入。进府后换了几次轿夫，黛玉暗暗观察这些规矩。到了垂花门前，众婆子让黛玉下轿步行。黛玉该如何应对这一路的见闻？',choices:[{text:'A. 大声询问为何换人',correct:false},{text:'B. 默默留意换人的规矩',correct:true},{text:'C. 不以为意随意跟行',correct:false}],correctIdx:1,feedback:'✔ 正确！黛玉“步步留心，时时在意”，默默观察贾府的规矩排场，既不多嘴多舌，又将一切看在眼里记在心中。这正是她聪慧谨慎的体现。',wrongFB:'✖ 不太合适。大声询问显得冒失无礼；不以为意则辜负了黛玉的聪慧。初入贾府，最明智的做法是默默观察、暗记规矩。'},
{title:'第四关：初见贾母',img:'./pic/scene4.jpeg',story:'黛玉终于来到贾母房中。外祖母一见黛玉，一把搂入怀中，心肝儿肉叫着大哭起来。黛玉想起亡母，也忍不住哭泣。众人在旁劝慰。此时黛玉该如何表现？',choices:[{text:'A. 放声大哭以表思母之情',correct:false},{text:'B. 努力克制悲伤，收住眼泪',correct:true},{text:'C. 强颜欢笑安慰贾母',correct:false}],correctIdx:1,feedback:'✔ 正确！黛玉虽然悲痛，但深知初来乍到不宜过分失态。原著中“方欲拜见时，早被他外祖母一把搂入怀中”，黛玉哭泣后很快收住，既表达了真情，又不失分寸。',wrongFB:'✖ 不太合适。放声大哭虽是真情流露，但初来乍到过于失态；强颜欢笑则显得虚伪。最得体的做法是适度表达悲伤后克制收住。'},
{title:'第五关：拜见舅母',img:'./pic/scene5.jpeg',story:'贾母让黛玉拜见大舅母邢夫人和二舅母王夫人。在王夫人房中，王夫人坐在西边下首，见黛玉来了，便往东让。黛玉心想：这正房炕上的位次必有讲究。王夫人再三让座，黛玉该如何做？',choices:[{text:'A. 听从王夫人的话坐上首',correct:false},{text:'B. 料定是长辈位次，不肯坐，只在挨炕的椅上坐了',correct:true},{text:'C. 站着不坐以示恭敬',correct:false}],correctIdx:1,feedback:'✔ 正确！黛玉料定那是贾政之位，绝不肯坐，只在挨炕的椅子上坐了。原著中黛玉“度其位次，便不上炕，只向东边椅子上坐了”。这体现了她的聪慧和对礼数的精准把握。',wrongFB:'✖ 不太合适。贸然坐上首是不知礼数；一直站着又显得过于拘谨。黛玉应当判断出那是长辈之位，选择合适的位置落座。'},
{title:'第六关：初见王熙凤',img:'./pic/scene6.jpeg',story:'正说话间，只听后院中有人笑声说：“我来迟了，不曾迎接远客！”黛玉心想：这些人个个皆敛声屏气，这来者是谁，竟如此放诞无礼？只见一群媳妇丫鬟围拥着一个人从后房门进来。此人打扮与众姑娘不同，彩绣辉煌，恍若神妃仙子。面对这位泼辣张扬的王熙凤，黛玉该如何应对？',choices:[{text:'A. 起身行礼，自报家门',correct:false},{text:'B. 含笑不语，暗中观察',correct:true},{text:'C. 直接询问对方身份',correct:false}],correctIdx:1,feedback:'✔ 正确！黛玉初见王熙凤时“不知是何许人也”，便含笑不语、暗中观察。待贾母介绍后才知是“凤辣子”。这种沉稳观察的态度，正是大家闺秀的风范。',wrongFB:'✖ 不太合适。在不知对方身份时贸然行礼或询问都不够稳妥。黛玉的做法是先观察、后应对，待长辈介绍后再做回应。'},
{title:'第七关：初见贾宝玉',img:'./pic/scene7.jpeg',story:'晚间，贾宝玉从庙里还愿回来。黛玉一见，心中大吃一惊：好生奇怪，倒像在哪里见过一般。宝玉问黛玉可曾读书、名字叫什么，又问有没有玉。黛玉想起母亲说过宝玉有一块落草时衔来的通灵宝玉。宝玉问“可也有玉没有”，黛玉该如何回答？',choices:[{text:'A. 如实回答“我没有那个。你那玉亦是件罕物，岂能人人有的”',correct:true},{text:'B. 说“我也有一块”以拉近关系',correct:false},{text:'C. 沉默不答避开话题',correct:false}],correctIdx:0,feedback:'✔ 正确！黛玉如实回答，既诚实又得体。原著中黛玉答道“我没有那个。你那玉亦是件罕物，岂能人人有的”。然而宝玉听后竟摔玉发狂，这让黛玉十分自责，也为后文埋下伏笔。',wrongFB:'✖ 不太合适。说谎不符合黛玉的性格；沉默不答则显得失礼。黛玉应当如实回答，这也是原著中的情节。'}
];
function showScreen(id){
  document.querySelectorAll('.screen').forEach(function(s){s.classList.remove('active')});
  document.getElementById(id).classList.add('active');
  window.scrollTo(0,0);
}
function startGame(){
  curScene=0;
  answers=[];
  localStorage.removeItem('daiyu_save');
  showScreen('gameScreen');
  renderScene();
}
function renderScene(){
  var sc=SCENES[curScene];
  document.getElementById('sceneBg').src=sc.img;
  document.getElementById('sceneTitle').textContent=sc.title;
  document.getElementById('sceneNum').textContent='第'+(curScene+1)+'关 / 共'+SCENES.length+'关';
  var stEl=document.getElementById('storyText');
  stEl.textContent='';
  clearInterval(typingTimer);
  var ci=0;
  typingTimer=setInterval(function(){
    if(ci<sc.story.length){stEl.textContent+=sc.story[ci];ci++;}
    else{clearInterval(typingTimer);}
  },30);
  var cd=document.getElementById('choicesDiv');
  cd.innerHTML='';
  var prev=answers[curScene];
  sc.choices.forEach(function(ch,idx){
    var btn=document.createElement('button');
    btn.className='choice-btn';
    btn.textContent=ch.text;
    if(prev!==undefined){
      btn.disabled=true;
      if(idx===sc.correctIdx)btn.classList.add('correct');
      else if(idx===prev)btn.classList.add('wrong');
    }else{
      btn.onclick=function(){handleChoice(idx);};
    }
    cd.appendChild(btn);
  });
  var fb=document.getElementById('feedbackDiv');
  fb.className='feedback';
  if(prev!==undefined){
    fb.textContent=(prev===sc.correctIdx)?sc.feedback:sc.wrongFB;
    fb.classList.add('show',(prev===sc.correctIdx)?'correct-fb':'wrong-fb');
  }
  document.getElementById('prevBtn').disabled=(curScene===0);
  var isLast=(curScene===SCENES.length-1);
  var nb=document.getElementById('nextBtn');
  nb.disabled=(prev===undefined);
  nb.textContent=isLast?'查看复盘':'下一关';
  var pd=document.getElementById('progressDiv');
  pd.innerHTML='';
  for(var i=0;i<SCENES.length;i++){
    var dot=document.createElement('span');
    dot.className='dot';
    if(answers[i]!==undefined)dot.classList.add('done');
    if(i===curScene)dot.classList.add('cur');
    pd.appendChild(dot);
  }
  saveGame();
}
function handleChoice(idx){
  answers[curScene]=idx;
  renderScene();
}
function nextScene(){
  if(curScene<SCENES.length-1){curScene++;renderScene();}
  else{showReview();}
}
function goPrev(){
  if(curScene>0){curScene--;renderScene();}
}
function showReview(){
  showScreen('reviewScreen');
  var correct=0;
  answers.forEach(function(ans,i){if(ans===SCENES[i].correctIdx)correct++;});
  document.getElementById('scoreText').textContent='你答对了 '+correct+' / '+SCENES.length+' 题';
  var rl=document.getElementById('reviewList');
  rl.innerHTML='';
  SCENES.forEach(function(sc,i){
    var div=document.createElement('div');
    div.className='review-item';
    var isRight=(answers[i]===sc.correctIdx);
    var h='<h3>'+sc.title+(isRight?' ✓':' ✗')+'</h3>';
    h+='<div class="your-ans">你的选择：'+sc.choices[answers[i]].text+'</div>';
    if(!isRight)h+='<div class="correct-ans">正确答案：'+sc.choices[sc.correctIdx].text+'</div>';
    h+='<div class="analysis">'+sc.feedback.substring(2)+'</div>';
    div.innerHTML=h;
    rl.appendChild(div);
  });
  localStorage.removeItem('daiyu_save');
}
function restartGame(){
  showScreen('startScreen');
}
function saveGame(){
  try{
    localStorage.setItem('daiyu_save',JSON.stringify({scene:curScene,answers:answers}));
  }catch(e){}
}
function loadGame(){
  try{
    var d=JSON.parse(localStorage.getItem('daiyu_save'));
    if(d&&d.answers&&d.answers.length>0){
      curScene=d.scene;
      answers=d.answers;
      showScreen('gameScreen');
      renderScene();
      return true;
    }
  }catch(e){}
  return false;
}
window.onload=function(){loadGame();};
</script>
</body></html>

